<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Fruit Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .navbar-nav > .nav-item {
            margin-right: 25px;
        }
        .row {
            margin-left: 0;
            margin-right: 0;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="row">
        <nav class="navbar justify-content-center navbar-expand-lg navbar-light" style="background-color: #E1CC63;">
            <div class="container-fluid">
                <a class="navbar-brand float-left" href="#">MyFruitShop</a>
                <div class="navbar-collapse" id="navbarNav" style="flex-grow: unset;">
                    <form id="login-form" method="post" action="#">
                        <ul class="navbar-nav justify-content-center ms-auto">
                            <li class="nav-item">
                                <input type="text" placeholder="Username" id="id_username" name="username" class="form-control">
                            </li>
                            <li class="nav-item">
                                <input type="password" placeholder="Password" id="id_password" name="password" class="form-control">
                            </li>
                            <li>
                                <button type="submit" class="btn btn-success">Login</button>
                            </li>
                        </ul>
                    </form>
                </div>
            </div>
        </nav>
    </div>

    <div class="row" style="padding-left: 2%;">
        <div class="col-sm-12 col-lg-8" style="margin-top: 2%;">
            <div class="row">
                <table class="table table-bordered" style="border: 1px solid #CECECE">
                    <thead>
                        <tr class="table-active" style="text-align: center;">
                            <th>Назва</th>
                            <th>Поточна кількість</th>
                            <th>Дії</th>
                            <th>Остання операція</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="text-align: center;">
                            <td>Ананаси</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_pineapple_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_pineapple" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_pineapple" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                        <tr style="text-align: center;">
                            <td>Яблука</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_apple_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_apple" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_apple" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                        <tr style="text-align: center;">
                            <td>Банани</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_banana_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_banana" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_banana" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                        <tr style="text-align: center;">
                            <td>Апельсини</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_orange_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_orange" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_orange" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                        <tr style="text-align: center;">
                            <td>Абрикоси</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_apricot_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_apricot" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_apricot" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                        <tr style="text-align: center;">
                            <td>Ківі</td>
                            <td>15</td>
                            <td style="text-align: start;">
                                <input type="number" class="form-control" id="id_kiwi_amount" placeholder="К-сть" style="display: inline-block; width: 60%; margin-right: 6%;">
                                <button id="buy_kiwi" type="button" class="btn btn-success">Купити</button>
                                <button id="sell_kiwi" type="button" class="btn btn-warning">Продати</button>
                            </td>
                            <td>принесли</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="row" style="margin-top: 2%;">
                <div class="col-sm-12 col-lg-6 justify-content-end" style="margin-top: 2%;">
                    <div class="chat-messages" style="border: 1px solid black; background-color: #E7E7E7; height: 300px; overflow-y: scroll; padding: 1.2%;">
                        <p>11:06 Anna: Hello</p>
                        <p>11:07 Heyman: Hi</p>
                        <p>11:07 Heyman: How are you?</p>
                        <p>11:08 Anna: OK. And you?</p>
                        <p>11:06 Anna: Hello</p>
                        <p>11:07 Heyman: Hi</p>
                        <p>11:07 Heyman: How are you?</p>
                        <p>11:08 Anna: OK. And you?</p>
                        <p>11:06 Anna: Hello</p>
                        <p>11:07 Heyman: Hi</p>
                        <p>11:07 Heyman: How are you?</p>
                        <p>11:08 Anna: OK. And you?</p>
                        <p>11:06 Anna: Hello</p>
                        <p>11:07 Heyman: Hi</p>
                        <p>11:07 Heyman: How are you?</p>
                        <p>11:08 Anna: OK. And you?</p>
                        <p>11:06 Anna: Hello</p>
                        <p>11:07 Heyman: Hi</p>
                        <p>11:07 Heyman: How are you?</p>
                        <p>11:08 Anna: OK. And you?</p>
                    </div>
                    <div id="message-field" style="margin-top: 0.5%;">
                        <input type="text" size="255" class="form-control" id="id_message" name="message" placeholder="Ваше повідомлення:" style="display: inline-block; width: 80%;">
                        <button type="button" id="send-message" class="btn btn-warning">Надіслати</button>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-6" style="border: 1px solid black; padding: 1%; margin-top: 2%;">
                    <div class="row">
                        <p style="text-align: center;">БАНК</p>
                    </div>
                    <div class="row" style="margin: 0 10px 0 10px;">
                        <table class="table table-bordered" style="border: 1px solid black;">
                            <tbody>
                                <tr>
                                    <td>Банківський рахунок: </td>
                                    <td style="color: #CD8403;"><strong><span id="bank_account">245</span> USD</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="row" style="margin-top: 1%;">
                        <div class="col-md-12 col-lg-4">
                            <button type="button" id="do-accounting-audit" class="btn btn-info" style="background-color: #EE95DD; border-color: #EE95DD;">Провести бухгалтерський аудит</button>
                        </div>
                        <div class="col-md-12 col-lg-8">
                            <div>
                                <p style="text-align: center;"><output id="audit_value" name="audit-value" for="percent-accounting-audit">0</output>%</p>
                            </div>
                            <input type="range" min="0" value="0" max="100" class="form-range" id="percent-accounting-audit" oninput="audit_value.value = this.value">
                        </div>
                    </div>
                    <div class="row" style="margin-top: 1%">
                        <div class="col-sm-12 col-lg-6">
                            <input type="number" id="sum" class="form-control" placeholder="cума">
                        </div>
                        <div class="col-sm-12 col-lg-6">
                            <button type="button" id="recharge" class="btn btn-success" style="margin-right: 5%;">Поповнити</button>
                            <button type="button" id="withdraw" class="btn btn-warning">Вивести</button>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 4%;">
                        <div class="col-sm-12 col-lg-6">
                            <button type="button" id="upload_declarations" class="btn btn-info">Завантажити декларації</button>
                        </div>
                        <div class="col-sm-12 col-lg-6" >
                            <p style="margin-top: 3%;">Завантажено: <span id="declarations_amount">2</span> шт.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-12 col-lg-4" style="margin-top: 2%; padding-right: 2%;">
            <div id="action-list" class="justify-content-end" style="border: 1px solid black; background-color: #E7E7E7; overflow-y: scroll; padding: 1.2%;">
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
                <p style="color: red;">16.11.2023 10:30 30 - ERROR: Постачальник привіз 4 ананаси. Недостатньо грошей на рахунку для придбання</p>
                <p style="color: #59AE32;">16.11.2023 10:30 30 - SUCCESS: Постачальник привіз 4 ананаси. Закупка здійснена. Гроші списані з рахунку.</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        document.getElementById('action-list').style.height = (window.innerHeight - 159).toString() + 'px';
        const chatSocket = new WebSocket('ws://' + window.location.host + 'ws/chat');

        document.querySelector('#id_message').onkeyup(function (event) {
            if (event.keyCode === 13) {
                document.querySelector('#send-message').click();
            }
        })

        document.querySelector('#send-message').onclick(function (event) {
            let message = document.querySelector('#id_message').value;
            chatSocket.send(JSON.stringify({'message': message, 'who': 'me'}))
        })

        chatSocket.onmessage(function (event) {
            let message = JSON.parse(event.data)
            document.querySelector('.chat-messages').append(
                `<p>${message}</p>`
            )
        })
        //chatSocket.send(JSON.stringify({'message': 'hello1'}));
    </script>
</body>
</html>